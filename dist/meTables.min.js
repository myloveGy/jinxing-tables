!function(e,a){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},a.getValue=function(e,t,i){if(!e||"object"!=typeof e)return i;if("string"==typeof t){var s=t.lastIndexOf(".");-1!==t.lastIndexOf(".")&&(e=a.getValue(e,t.substr(0,s),i),t=t.substr(s+1))}return t in e?e[t]:e[t]?e[t]:i};var i,s,n,o=null,l=function(e){this.bind=function(){var e=this;a(document).on("click",".me-table-button-"+e.options.unique,function(t){t.preventDefault();var i=a(this).data("func");i&&a.isFunction(a.getValue(e,i))&&e[i]()}),a(document).on("click","#me-table-button-updateAll-"+e.options.unique,function(t){t.preventDefault(),e.updateAll()}),a(document).on("click","#"+e.options.unique+"-save",function(t){t.preventDefault(),e.save()}),a(document).on("click",".me-table-update-"+e.options.unique,function(t){t.preventDefault(),e.update(a(this).data("row"))}),a(document).on("click",".me-table-delete-"+e.options.unique,function(t){t.preventDefault(),e.delete(a(this).data("row"))}),a(document).on("click",".me-table-detail-"+e.options.unique,function(t){t.preventDefault(),e.detail(a(this).data("row"))}),a(e.options.sTable).find("th input:checkbox").on("click",function(){a(e.options.sTable).find("input:checkbox").prop("checked",a(this).prop("checked"))}),this.options.searchInputEvent&&(a(this.options.searchForm+" input").on(this.options.searchInputEvent,function(){e.table.draw()}),"keydown"!=this.options.searchInputEvent&&a(this.options.searchForm+" input").on("keydown",function(t){13===t.which&&e.table.draw()})),this.options.searchSelectEvent&&a(this.options.searchForm+" select").on(this.options.searchSelectEvent,function(){e.table.draw()}),a(this.options.searchForm).submit(function(t){t.preventDefault(),e.search()}).find("button:reset").on("click",function(t){t.preventDefault(),a(e.options.searchForm).get(0).reset(),e.search()})},this.init=function(e){this.action="init",this.initRender(),this.table=a(this.options.sTable).DataTable(this.options.table);var t="";if(this.options.search&&this.options.search.render&&(t=l.createButtonHtml(this.options.search.button),this.options.searchInputEvent=!1,this.options.searchSelectEvent=!1),"middle"===this.options.searchType){var i="";this.options.searchHtml&&a.trim(this.options.searchHtml)&&(i='<form id="'+this.options.searchForm.replace("#","")+'">'+this.options.searchHtml+t+"</form>"),a(this.options.sTable+"_filter").html(i),a(this.options.sTable+"_wrapper div.row div.col-xs-6:first").removeClass("col-xs-6").addClass("col-xs-2").next().removeClass("col-xs-6").addClass("col-xs-10")}else if(this.options.search.render){this.options.searchHtml+=t;try{a(this.options.searchForm)[this.options.search.type](this.options.searchHtml)}catch(e){a(this.options.searchForm).append(this.options.searchHtml)}}try{a(this.options.buttonSelector)[this.options.buttonType](this.options.buttonHtml)}catch(e){a(this.options.buttonSelector).append(this.options.buttonHtml)}if(this.options.editable&&(a.fn.editableform.loading="<div class='editableform-loading'><i class='ace-icon fa fa-spinner fa-spin fa-2x light-blue'></i></div>",a.fn.editableform.buttons='<button type="submit" class="btn btn-info editable-submit"><i class="ace-icon fa fa-check"></i></button><button type="button" class="btn editable-cancel"><i class="ace-icon fa fa-times"></i></button>',a.fn.editable.defaults.ajaxOptions={type:"POST",dataType:"json"},a.fn.editable.defaults.mode=this.options.editableMode||"inline"),!l.empty(this.options.fileSelector)&&this.options.fileSelector.length>0)for(var s in this.options.fileSelector)aceFileUpload(this.options.fileSelector[s],this.getUrl("upload"));return"function"==typeof e&&e(),this.bind(),this};var i=this;if(i.editColumns=[],this.search=function(e){this.action="search",e||(e=!1),this.table.draw(e)},this.refresh=function(){var e=a(this.options.searchForm).get(0);e&&e.reset(),this.action="refresh",this.search(!0)},this.create=function(){this.action="create",this.initForm(null)},this.update=function(e){this.action="update",this.initForm(this.table.data()[e])},this.updateAll=function(){var e=a(this.options.sTable+" tbody input:checkbox:checked:last").data("row"),t=a.getValue(this.table.data(),parseInt(e));if(!t)return layer.msg(l.getLanguage("noSelect"),{icon:5});this.action="update",this.initForm(t)},this.delete=function(e){var t=this;this.action="delete",layer.confirm(l.getLanguage("confirm").replace("_LENGTH_",""),{title:l.getLanguage("confirmOperation"),btn:[l.getLanguage("determine"),l.getLanguage("cancel")],shift:4,icon:0},function(){t.save(t.table.data()[e])},function(){layer.msg(l.getLanguage("cancelOperation"),{time:800})})},this.deleteAll=function(){this.action="deleteAll";var e=this,t=[];if(a(this.options.sTable+" tbody input:checkbox:checked").each(function(){var i=parseInt(a(this).val()),s=e.table.data()[i]?e.table.data()[i]:null;s&&s[e.options.pk]&&t.push(s[e.options.pk])}),t.length<1)return layer.msg(l.getLanguage("noSelect"),{icon:5});layer.confirm(l.getLanguage("confirm").replace("_LENGTH_",t.length),{title:l.getLanguage("confirmOperation"),btn:[l.getLanguage("determine"),l.getLanguage("cancel")],shift:4,icon:0},function(){e.save({id:t.join(",")}),a(e.options.sTable+" input:checkbox:checked").prop("checked",!1)},function(){layer.msg(l.getLanguage("cancelOperation"),{time:800})})},this.detail=function(e){if(this.options.oLoading)return!1;var i=this,s=this.table.data()[e];if(t=i.options.title,n="#data-detail-"+i.options.unique,void 0!==s){l.detailTable(this.options.table.columns,s,".data-detail-",e);var o=a.extend(!0,{title:i.options.title+a.getValue(l.language,"meTables.sInfo"),content:a("#data-detail-"+i.options.unique).removeClass("hide"),cancel:function(e){layer.close(e)},end:function(){a(".views-info").html(""),a("#data-detail-"+i.options.unique).addClass("hide"),i.options.oLoading=null}},this.options.oViewConfig);this.options.oLoading=layer.open(o),this.options.bViewFull&&layer.full(this.options.oLoading)}},this.save=function(e){if(!l.inArray(this.action,["create","update","delete","deleteAll"]))return layer.msg(l.getLanguage("operationError")),!1;if(l.inArray(this.action,["create","update"])){if(!a(this.options.sFormId).validate(this.options.formValidate).form())return!1;e=a(this.options.sFormId).serializeArray()}if(a.isEmptyObject(e))return layer.msg(a.getValue(l.language,"meTables.empty")),!1;if(a.isFunction(this.beforeSave)&&!1===this.beforeSave(e))return!1;var t=this;return l.ajax({url:this.getUrl(this.action),type:"POST",data:e,dataType:"json"}).done(function(e){if(layer.msg(t.options.getMessage(e),{icon:t.options.isSuccess(e)?6:5}),t.options.isSuccess(e)){if(a.isFunction(t.afterSave)&&!1===t.afterSave(e.data))return!1;t.table.draw(!1),a(t).find("input:checkbox").prop("checked",!1),a(t.options.sModal).modal("hide")}}),!1},this.export=function(){this.action="export";var e=null,t=a("meta[name=csrf-param]").attr("content")||"_csrf",i='<form action="'+this.getUrl("export")+'" target="_blank" method="POST" class="me-export" style="display:none">';i+='<input type="hidden" name="title" value="'+this.options.title+'"/>',i+='<input type="hidden" name="'+t+'" value="'+a("meta[name=csrf-token]").attr("content")+'"/>',this.options.table.columns.forEach(function(e,t){e.data&&!1!==e.isExport&&!1!==e.bExport&&!1!==e.export&&(i+='<input type="hidden" name="fields['+e.data+']" value="'+e.title+'"/>')});var s=a(this.options.searchForm).serializeArray();for(e in s)if(!l.empty(s[e].value)&&"All"!==s[e].value){var n=l.getAttributeName(s[e].name,this.options.filters);i+='<input type="hidden" name="'+n+'" value="'+s[e].value+'"/>'}for(e in this.options.params)i+='<input type="hidden" name="'+this.options.filters+"["+e+']" value="'+this.options.params[e]+'"/>';var o=a(i);a("body").append(o);var r=new a.Deferred,c="temporary-iframe-"+(new Date).getTime()+"-"+parseInt(1e3*Math.random()),d=a('<iframe id="'+c+'" name="'+c+'" \t\t\t\t\t\t\t\tframeborder="0" width="0" height="0" src="about:blank"\t\t\t\t\t\t\t\tstyle="position:absolute; z-index:-1; visibility: hidden;"></iframe>').insertAfter(o);o.append('<input type="hidden" name="temporary-iframe-id" value="'+c+'" />'),d.data("deferrer",r),o.attr({method:"POST",enctype:"multipart/form-data",target:c}),o.get(0).submit();var u=setTimeout(function(){u=null,r.reject(a(document.getElementById(c).contentDocument).text()),a(".me-export").remove()},500);r.fail(function(e){if(e)try{e=a.parseJSON(e),layer.msg(e.msg,{icon:0===e.code?6:5})}catch(e){layer.msg(l.getLanguage("sServerError"),{icon:5})}else layer.msg(l.getLanguage("sExport"),{icon:6})}).always(function(){clearTimeout(u)}),r.promise()},this.getUrl=function(e){return this.options.urlPrefix+this.options.url[e]+this.options.urlSuffix},this.initRender=function(){var e=this,t="<form "+l.handleParams(this.options.form)+"><fieldset>",i='<table class="table table-bordered table-striped table-detail-'+this.options.unique+'">',s=[],n=[];this.options.table.columns.forEach(function(o,r){!1!==o.bViews&&!1!==o.view&&!1!==o.isViews&&(i+=l.detailTableCreate(o.title,o.data,r,e.options.detailTable)),void 0!==o.edit&&(t+=l.formCreate(o,e.options.editFormParams,e)),void 0!==o.search&&(e.options.searchHtml+=l.searchInputCreate(o,r,e.options.searchType)),!o.defaultOrder||"asc"!==o.defaultOrder&&"desc"!==o.defaultOrder||s.push([r,o.defaultOrder]),(o.isHide||o.bHide||o.hide)&&n.push(r),e.options.editable&&void 0!==o.editable&&(o.editable.name=o.editable.name?o.editable.name:o.data,e.options.editable[o.editable.name]={source:o.value,send:"always",url:e.getUrl("editable"),title:o.title,success:function(e){if(0!==e.code)return e.msg},error:function(e){layer.msg(l.getLanguage("sServerError"),{icon:5})}},e.options.editable[o.editable.name]=a.extend(!0,{},e.options.editable[o.editable.name],o.editable),o.class="my-edit edit-"+o.editable.name)}),e.options.editable&&(e.options.table.fnDrawCallback=function(){for(var t in e.options.editable)a(e.options.sTable+" tbody tr td.edit-"+t).each(function(){var i=e.table.row(a(this).closest("tr")).data(),s={};i&&(s.value=i[t],s.pk=i[e.options.pk]),a(this).editable(a.extend(!0,{},e.options.editable[t],s))})}),e.options.editFormParams.bMultiCols&&l.empty(e.options.editFormParams.modalClass)&&(e.options.editFormParams.modalClass="bs-example-modal-lg",e.options.editFormParams.modalDialogClass="modal-lg"),e.options.editFormParams.bMultiCols&&e.options.editFormParams.index%e.options.editFormParams.iCols!=e.options.editFormParams.iCols-1&&(t+="</div>");var o=l.modalCreate({params:{id:e.options.sModal.replace("#","")},html:t,"button-id":e.options.sTable.replace("#","")+"-save",modalClass:e.options.editFormParams.modalClass,modalDialogClass:e.options.editFormParams.modalDialogClass},{params:{id:"data-detail-"+e.options.sTable.replace("#","")},html:i});s.length>0&&(this.options.table.order=s),n.length>0&&(this.options.table.columnDefs?this.options.table.columnDefs.push({targets:n,visible:!1}):this.options.table.columnDefs=[{targets:n,visible:!1}]),a("body").append(o)},this.initForm=function(e){if(layer.close(this.options.oLoading),"function"==typeof this.beforeShow&&!1===this.beforeShow(e))return!1;var t=this.options.sFormId,i=this.options.sModal,s=this.options.title;a(i).find("h4").html(s+l.getLanguage("create"===this.action?"sCreate":"sUpdate"));try{a(this.options.sFormId).find(".has-error").removeClass("has-error"),a(this.options.sFormId).validate(this.options.formValidate).resetForm()}catch(e){}if(l.initForm(t,e,this.editColumns),"function"==typeof this.afterShow&&!1===this.afterShow(e))return!1;a(i).modal({backdrop:"static"})},this.push=function(e,t,a){if(void 0!==t&&!l.empty(t))if(void 0===a)for(n in t)e.push({name:n,value:t[n]});else for(n in t)e.push({name:a+"["+n+"]",value:t[n]})},this.options=a.extend(!0,{},l.defaultOptions,e),this.table=null,this.action="construct",this.options.unique=this.options.sTable.replace("#",""),this.options.table.ajax||(this.options.table.ajax={url:i.getUrl("search"),data:function(e){a(i.options.sTable).find("input:checkbox").prop("checked",!1);var t=[];for(var s in t.push({name:"offset",value:e.start}),t.push({name:"limit",value:e.length}),t.push({name:"draw",value:e.draw}),e.columns)e.columns[s].data&&t.push({name:"columns[]",value:e.columns[s].data});var n=[];for(var s in e.order){var o=e.order[s].column;e.columns[o]&&e.columns[o].data&&n.push(e.columns[o].data+" "+e.order[s].dir)}if(n.length>0&&t.push({name:"orderBy",value:n.join(",")}),a(i.options.searchForm).serializeArray().forEach(function(e){""!==e.value&&"All"!==e.value&&t.push({name:l.getAttributeName(e.name,i.options.filters),value:e.value})}),i.options.params)for(var s in i.options.params)t.push({name:i.options.filters+"["+s+"]",value:i.options.params[s]});return t},dataSrc:function(e){return i.options.isSuccess(e)||void 0!==e.draw||(layer.msg(i.options.getMessage(e),{icon:5}),e.draw=1,e.recordsTotal=0,e.recordsFiltered=0,e.data=[]),e.data}}),this.options.table.language||(this.options.table.language=l.getLanguage("dataTables","*")),this.options.form.id=this.options.sFormId.replace("#",""),this.options.table.columns=this.options.table.columns||this.options.table.aoColumns,this.options.number&&this.options.table.columns.unshift(this.options.number),this.options.checkbox&&this.options.table.columns.unshift(this.options.checkbox),this.options.operations){var s=this.options.operations.buttons;delete this.options.operations.buttons,this.options.operations.createdCell=function(e,t,n,o){a(e).html(l.buttonsCreate(o,s,i.options.unique,n))},this.options.table.columns.push(this.options.operations)}for(var n in"middle"!==this.options.searchType&&l.empty(this.options.table.sDom)&&(this.options.table.sDom="t<'row'<'col-xs-6'li><'col-xs-6'p>>"),this.options.buttons)this.options.buttons[n]&&(this.options.buttonHtml+='<button data-func="'+a.getValue(this.options.buttons[n],"data-func")+'" class="'+this.options.buttons[n].className+" me-table-button-"+this.options.unique+'" id="'+this.options.unique+"-"+n+'">                                <i class="'+this.options.buttons[n].icon+'"></i>                            '+this.options.buttons[n].text+"                            </button> ");return this};l.getAttributeName=function(e,t){if(/\[/.test(e))var a=e.indexOf("["),i=e.substring(0,a),s=e.substring(a);else i=e,s="";return t+"["+i+"]"+s},l.ajax=function(e){return o=layer.load(),a.ajax(e).always(function(){layer.close(o)}).fail(function(){layer.msg(l.getLanguage("sServerError"),{icon:5})})},l.inArray=function(e,t){if("object"==typeof t)for(var a in t)if(t[a]===e)return!0;return!1},l.empty=function(e){return void 0===e||""===e||null===e},l.isObject=function(e){return"object"==typeof e},l.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},l.handleParams=function(e,t){if(i="",void 0!==e&&"object"==typeof e){for(var a in t=t||"",e)i+=" "+a+'="'+t+e[a]+'"';i+=" "}return i},l.labelCreate=function(e,t){return"<label"+this.handleParams(t)+"> "+e+" </label>"},l.inputCreate=function(e){return e.type||(e.type="text"),"<input"+this.handleParams(e)+"/>"},l.textCreate=function(e){return e.type="text",this.inputCreate(e)},l.passwordCreate=function(e){return e.type="password",this.inputCreate(e)},l.fileCreate=function(e){var t=e.options;return delete e.options,s='<input type="hidden" '+this.handleParams(e)+"/>",t.type="file",s+this.inputCreate(t)},l.radioCreate=function(e,t){if(s="",t&&this.isObject(t)){e.class="ace valid";var a=e.default;if(e=this.handleParams(e),this.isArray(t))for(n in t)s+='<label class="line-height-1 blue"> <input type="radio" '+e+(a==t[n].value?' checked="checked" ':"")+' value="'+t[n].value+'"  /> <span class="lbl"> '+t[n].label+" </span> </label>　 ";else for(n in t)s+='<label class="line-height-1 blue"> <input type="radio" '+e+(a==n?' checked="checked" ':"")+' value="'+n+'"  /> <span class="lbl"> '+t[n]+" </span> </label>　 "}return s},l.checkboxCreate=function(e,t){if(s="",t&&this.isObject(t)){var a=e.all,i=e.divClass?e.divClass:"col-xs-6";if(delete e.all,delete e.divClass,e.class="ace m-checkbox",e=this.handleParams(e),a&&(s+='<div class="checkbox col-xs-12"><label><input type="checkbox" class="ace checkbox-all" onclick="var isChecked = $(this).prop(\'checked\');$(this).parent().parent().parent().find(\'input[type=checkbox]\').prop(\'checked\', isChecked);" /><span class="lbl"> '+l.getLanguage("sSelectAll")+" </span></label></div>"),this.isArray(t))for(n in t)s+='<div class="checkbox '+i+'"><label><input type="checkbox" '+e+' value="'+t[n].value+'" /><span class="lbl"> '+t[n].label+" </span></label></div>";else for(n in t)s+='<div class="checkbox '+i+'"><label><input type="checkbox" '+e+' value="'+n+'" /><span class="lbl"> '+t[n]+" </span></label></div>"}return s},l.selectCreate=function(e,t){if(s="",t&&this.isObject(t)){var a=e.default;if(delete e.default,e.multiple&&(e.name+="[]"),s+="<select "+this.handleParams(e)+">",this.isArray(t))for(n in t)s+='<option value="'+t[n].value+'" '+(t[n].value==a?' selected="selected" ':"")+" >"+t[n].label+"</option>";else for(n in t)s+='<option value="'+n+'" '+(n==a?' selected="selected" ':"")+" >"+t[n]+"</option>";s+="</select>"}return s},l.textareaCreate=function(e){return e.class||(e.class="form-control"),e.rows||(e.rows=5),s=(e.value?e.value:"")+"</textarea>",delete e.value,"<textarea"+this.handleParams(e)+">"+s},l.searchInputCreate=function(e,t,a){e.search.name||(e.search.name=e.data),e.search.title||(e.search.title=e.title),e.search.type||(e.search.type="text");var i="select"===e.search.type?{All:l.getLanguage("all")}:null,n=e.search.type+"SearchMiddleCreate",o="textSearchMiddleCreate";"middle"!==a&&(n=n.replace("Middle",""),o=o.replace("Middle",""));try{s=this[n](e.search,e.value,i)}catch(t){s=this[o](e.search)}return s},l.buttonsCreate=function(e,t,i,s){var n='<div class="hidden-sm hidden-xs btn-group">',o='<div class="hidden-md hidden-lg"><div class="inline position-relative"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-primary dropdown-toggle"><i class="ace-icon fa fa-cog icon-only bigger-110"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">';if(void 0!==t&&"object"==typeof t)for(var l in t)if(t[l]&&!a.isEmptyObject(t[l])&&(!a.isFunction(t[l].show)||t[l].show(s))){var r=t[l].buttonParams?t[l].buttonParams:{title:t[l].title};n+=" <button "+this.handleParams(r)+'class="btn '+t[l].className+" "+t[l].cClass+"-"+i+' btn-xs" data-row="'+e+'">',t[l].icon&&(n+='<i class="ace-icon fa '+t[l].icon+' bigger-120"></i>'),t[l]["button-title"]&&(n+=t[l]["button-title"]),n+="</button> ",o+='<li><a title="'+t[l].title+'" data-rel="tooltip" class="tooltip-info '+t[l].cClass+"-"+i+'" href="javascript:;" data-original-title="'+t[l].title+'" data-row="'+e+'"><span class="'+t[l].sClass+'"><i class="ace-icon fa '+(t[l]["min-icon"]?t[l]["min-icon"]:t[l].icon)+' bigger-120"></i></span></a></li>'}return n+"</div>"+o+"</ul></div></div>"},l.formCreate=function(e,t,i){if(t.index||(t.index=0),e.edit.type||(e.edit.type="text"),!e.edit.name)if(e.data.indexOf(".")){var s=e.data.split(".");e.edit.name=s.shift(),s.forEach(function(t){e.edit.name+="["+t+"]"})}else e.edit.name=e.data;if(i.editColumns.push({name:e.edit.name,index:e.data||e.edit.name}),"hidden"===e.edit.type)return this.inputCreate(e.edit);var n="";if(e.edit.class="form-control "+(e.edit.class?e.edit.class:""),t.iMultiCols>1&&!t.aCols){t.aCols=[];var o=Math.ceil(12/t.iMultiCols);t.aCols[0]=Math.floor(.3*o),t.aCols[1]=o-t.aCols[0]}(!t.bMultiCols||t.iColsLength>1&&t.index%t.iColsLength==0)&&(n+='<div class="form-group">');var l=e.edit.name.replace("[]","");l.indexOf("[")&&(l=l.replace(/(\[)|(\]\[)/gi,"-").replace("]","")),n+=this.labelCreate(e.title,{class:"col-sm-"+t.aCols[0]+" control-label div-left-"+l+" "+(a.getValue(e.edit,"required")?"required":"")}),n+='<div class="col-sm-'+t.aCols[1]+" div-right-"+l+'">';try{n+=this[e.edit.type+"Create"](e.edit,e.value)}catch(t){e.edit.type="text",n+=this.inputCreate(e.edit)}return n+="</div>",(!t.bMultiCols||t.iColsLength>1&&t.index%t.iColsLength==t.iColsLength-1)&&(n+="</div>"),t.index++,n},l.selectInput=function(e,t,i){s="";var o=a.getValue(e,"default")||a.getValue(e,"value"),l=a.getValue(e,"hideAll");if(delete e.default,delete e.value,delete e.hideAll,i&&!l)for(n in i)s+='<option value="'+n+'" '+(null==o?'selected="selected"':"")+">"+i[n]+"</option>";if(t)if(this.isArray(t))for(n in t)s+='<option value="'+t[n].value+'" '+(o===t[n].value?'selected="selected"':"")+">"+t[n].label+"</option>";else for(n in t)s+='<option value="'+n+'" '+(o===n?'selected="selected"':"")+">"+t[n]+"</option>";return e.multiple&&(e.name+="[]"),"<select "+this.handleParams(e)+">"+s+"</select>"},l.textSearchMiddleCreate=function(e){return e.id="search-"+e.name,'<label for="search-'+e.name+'"> '+e.title+": "+this.inputCreate(e)+"</label>"},l.selectSearchMiddleCreate=function(e,t,a){return e.id="search-"+e.name,'<label for="search-'+e.name+'"> '+e.title+": "+this.selectInput(e,t,a)+"</label>"},l.searchParams=function(e){var t={id:"search-"+e.name,name:e.name,class:"form-control"},i={for:"search-"+e.name},s=e.options,n=e.labelOptions;return delete e.options,delete e.labelOptions,t=a.extend(t,e),s&&(t=a.extend(t,s)),n&&(i=a.extend(i,n)),{input:t,label:i}},l.textSearchCreate=function(e){e.placeholder||(e.placeholder=l.getLanguage("pleaseInput")+e.title),e.labelOptions||(e.labelOptions={class:"sr-only"});var t=this.searchParams(e);return'<div class="form-group">                <label'+this.handleParams(t.label)+">"+e.title+'</label>                <input type="text"'+this.handleParams(t.input)+">                </div> "},l.selectSearchCreate=function(e,t,a){var i=this.searchParams(e);return'<div class="form-group">                <label'+this.handleParams(i.label)+">"+e.title+"</label>                "+this.selectInput(i.input,t,a)+"                </div> "},l.initForm=function(e,t,i){var s=a(e);objForm=s.get(0),void 0!==objForm&&(s.find("input[type=hidden]").val(""),s.find("input[type=checkbox]").prop("checked",!1),objForm.reset(),t&&i&&i.length>0&&i.forEach(function(e){var i=a.getValue(t,e.index);if(void 0!==objForm[e.name]&&"password"!==objForm[e.name].type){var s=a(objForm[e.name]);(s.hasClass("time-format")||s.data("time-format"))&&(i=l.timeFormat(parseInt(i),s.attr("time-format")||"yyyy-MM-dd hh:mm:ss")),objForm[e.name].value=i}}))},l.divCreate=function(e){return"<div"+this.handleParams(e)+"></div>"},l.dateCreate=function(e){return'<div class="input-group bootstrap-datepicker">                 <input class="form-control date-picker '+(e.class?e.class:"")+'"  type="text" '+this.handleParams(e)+'/>                 <span class="input-group-addon"><i class="fa fa-calendar bigger-110"></i></span>                 </div>'},l.timeCreate=function(e){return'<div class="input-group bootstrap-timepicker">                 <input type="text" class="form-control time-picker '+(e.class?e.class:"")+'" '+this.handleParams(e)+'/>                 <span class="input-group-addon"><i class="fa fa-clock-o bigger-110"></i></span>                 </div>'},l.dateTimeCreate=function(e){return'<div class="input-group bootstrap-datetimepicker">                 <input type="text" class="form-control datetime-picker '+(e.class?e.class:"")+'" '+this.handleParams(e)+'/>                 <span class="input-group-addon"><i class="fa fa-clock-o bigger-110"></i></span>                 </div>'},l.timeRangeCreate=function(e){return'<div class="input-daterange input-group">                 <input type="text" class="input-sm form-control" name="start" />                 <span class="input-group-addon"><i class="fa fa-exchange"></i></span>                 <input type="text" class="input-sm form-control" name="end" />             </div>'},l.dateRangeCreate=function(e){return'<div class="input-group">                 <span class="input-group-addon"><i class="fa fa-calendar bigger-110"></i></span>                 <input class="form-control daterange-picker '+(e.class?e.class:"")+'" type="text" '+this.handleParams(e)+" />             </div>"},l.detailTable=function(e,t,i,s){e.forEach(function(e){var n=e.data,o=a.getValue(t,n),l=a(i+(n?n.replace(".","-"):n));void 0!==e.edit&&"password"===e.edit.type&&(o="******"),void 0===e.createdCell||"function"!=typeof e.createdCell?(e.render&&"function"==typeof e.render&&(o=e.render(o,!0,t)),l.html(o)):e.createdCell(l,o,t,s,void 0)})},l.detailTableCreate=function(e,t,a,i){s="";var n=t&&"string"==typeof t?t.replace(".","-"):t;return i&&i.bMultiCols?(i.iColsLength>1&&a%i.iColsLength==0&&(s+="<tr>"),s+='<td class="text-right" width="25%">'+e+'</td><td class="views-info data-detail-'+n+'"></td>',i.iColsLength>1&&a%i.iColsLength==i.iColsLength-1&&(s+="</tr>")):s+='<tr><td class="text-right" width="25%">'+e+'</td><td class="views-info data-detail-'+n+'"></td></tr>',s},l.modalCreate=function(e,t){return'<div class="hide" '+this.handleParams(t.params)+"> "+t.html+' </table></div>             <div class="modal fade '+(e.modalClass?e.modalClass:"")+'" '+this.handleParams(e.params)+' tabindex="-1" role="dialog" >                 <div class="modal-dialog '+(e.modalDialogClass?e.modalDialogClass:"")+'" role="document">                     <div class="modal-content">                         <div class="modal-header">                             <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                             <h4 class="modal-title"></h4>                         </div>                         <div class="modal-body">'+e.html+'</fieldset></form></div>                         <div class="modal-footer">                             <button type="button" class="btn btn-default" data-dismiss="modal">'+l.getLanguage("sBtnCancel")+'</button>                             <button type="button" class="btn btn-primary '+(e.bClass?e.bClass:"")+'" '+(e["button-id"]?'id="'+e["button-id"]+'"':"")+">"+l.getLanguage("sBtnSubmit")+"</button>                         </div>                     </div>                 </div>             </div>"},l.timeFormat=function(e,t){return t||(t="yyyy-MM-dd"),new Date(1e3*e).Format(t)},l.dateTimeString=function(e,t){a(e).html(l.timeFormat(t,"yyyy-MM-dd hh:mm:ss"))},l.statusString=function(e,t){a(e).html('<span class="label label-'+(1===parseInt(t)?'success">启用':'warning">禁用')+"</span>")},l.valuesString=function(e,t,a,i){return i||(i="label label-sm "),'<span class="'+i+" "+(t[a]?t[a]:"")+'"> '+(e[a]?e[a]:a)+" </span>"},l.getLanguage=function(){return arguments.length>1&&a.getValue(l.language,arguments[0])?"*"===arguments[1]?a.getValue(l.language,arguments[0]):a.getValue(l.language,arguments[0]+"."+arguments[1]):a.getValue(l.language,"meTables."+arguments[0])},l.createButtonHtml=function(e){var t="";for(var a in e)if(e[a]){var i=e[a].icon||"",s=e[a].text||"";delete e[a].icon,delete e[a].text,e[a].type=a;var n=i?'<i class="'+i+'"></i>':"";t+="<button "+l.handleParams(e[a])+">"+n+s+"</button>"}return t},l.language={meTables:{operations:"操作",operations_see:"查看",operations_update:"编辑",operations_delete:"删除",sBtnCancel:"取消",sBtnSubmit:"确定",sSelectAll:"选择全部",sInfo:"详情",sCreate:"新增",sUpdate:"编辑",sExport:"数据正在导出, 请稍候...",sAppearError:"出现错误",sServerError:"服务器繁忙,请稍候再试...",determine:"确定",cancel:"取消",confirm:"您确定需要删除这_LENGTH_条数据吗?",confirmOperation:"确认操作",cancelOperation:"您取消了删除操作!",noSelect:"没有选择需要操作的数据",operationError:"操作有误",search:"搜索",create:"添加",updateAll:"修改",deleteAll:"删除",refresh:"刷新",export:"导出",pleaseInput:"请输入",all:"全部",number:"序号",empty:"没有数据",reset:"清除"},dataTables:{sLengthMenu:"每页 _MENU_ 条记录",sZeroRecords:"没有找到记录",sInfo:"显示 _START_ 到 _END_ 共有 _TOTAL_ 条数据",sInfoEmpty:"无记录",sInfoFiltered:"(从 _MAX_ 条记录过滤)",sSearch:"搜索：",oPaginate:{sFirst:"首页",sPrevious:"上一页",sNext:"下一页",sLast:"尾页"}}},l.defaultOptions={title:"",language:"zh-cn",pk:"id",sModal:"#table-modal",sTable:"#show-table",sFormId:"#edit-form",sMethod:"POST",params:null,searchHtml:"",searchType:"middle",searchForm:"#search-form",searchInputEvent:"blur",searchSelectEvent:"change",filters:"filters",isSuccess:function(e){return 0===e.code},getMessage:function(e){return e.msg},search:{render:!0,type:"append",button:{submit:{class:"btn btn-info btn-sm",icon:"ace-icon fa fa-search bigger-110",style:"margin-left: 5px;padding-top: 1px; padding-bottom:1px",text:l.getLanguage("search")},reset:{class:"btn btn-warning btn-sm",style:"margin-left: 10px;padding-top: 1px; padding-bottom:1px",icon:"ace-icon fa fa-undo bigger-110",text:l.getLanguage("reset")}}},fileSelector:[],form:{method:"post",class:"form-horizontal",name:"edit-form",autocomplete:"off"},formValidate:{errorElement:"div",errorClass:"help-block",focusInvalid:!1,highlight:function(e){a(e).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(e){a(e).closest(".form-group").removeClass("has-error"),a(e).remove()}},editFormParams:{bMultiCols:!1,iColsLength:1,aCols:[3,8],modalClass:"",modalDialogClass:""},bViewFull:!1,oViewConfig:{type:1,shade:.3,shadeClose:!0,maxmin:!0,area:["50%","auto"]},detailTable:{bMultiCols:!1,iColsLength:1},urlPrefix:"",urlSuffix:"",url:{search:"search",create:"create",update:"update",delete:"delete",export:"export",upload:"upload",editable:"editable",deleteAll:"delete-all"},table:{bLengthChange:!0,bAutoWidth:!1,bPaginate:!0,iDisplayStart:0,iDisplayLength:10,bServerSide:!0,bRetrieve:!0,bDestroy:!0,sPaginationType:"full_numbers"},editable:null,editableMode:"inline",buttonHtml:"",buttonSelector:"#me-table-buttons",buttonType:"append",buttons:{create:{"data-func":"create",text:l.getLanguage("create"),icon:"ace-icon fa fa-plus-circle blue",className:"btn btn-white btn-primary btn-bold"},updateAll:{"data-func":"updateAll",text:l.getLanguage("updateAll"),icon:"ace-icon fa fa-pencil-square-o orange",className:"btn btn-white btn-info btn-bold"},deleteAll:{"data-func":"deleteAll",text:l.getLanguage("deleteAll"),icon:"ace-icon fa fa-trash-o red",className:"btn btn-white btn-danger btn-bold"},refresh:{"data-func":"refresh",text:l.getLanguage("refresh"),icon:"ace-icon fa  fa-refresh",className:"btn btn-white btn-success btn-bold"},export:{"data-func":"export",text:l.getLanguage("export"),icon:"ace-icon glyphicon glyphicon-export",className:"btn btn-white btn-warning btn-bold"}},number:{title:l.getLanguage("meTables","number"),data:null,view:!1,render:function(e,t,i,s){return!(!s||a.isEmptyObject(s))&&s.row+1+s.settings._iDisplayStart},sortable:!1},checkbox:{data:null,sortable:!1,class:"center text-center",title:'<label class="position-relative"><input type="checkbox" class="ace" /><span class="lbl"></span></label>',view:!1,createdCell:function(e,t,i,s){a(e).html('<label class="position-relative"><input type="checkbox" class="ace" data-row="'+s+'" value="'+s+'"/><span class="lbl"></span></label>')}},operations:{title:l.getLanguage("meTables","operations"),width:"120px",defaultContent:"",sortable:!1,data:null,buttons:{see:{title:l.getLanguage("meTables","operations_see"),className:"btn-success",cClass:"me-table-detail",icon:"fa-search-plus",sClass:"blue","min-icon":"fa-search-plus"},update:{title:l.getLanguage("meTables","operations_update"),className:"btn-info",cClass:"me-table-update",icon:"fa-pencil-square-o",sClass:"green","min-icon":"fa-pencil-square-o"},delete:{title:l.getLanguage("meTables","operations_delete"),className:"btn-danger",cClass:"me-table-delete",icon:"fa-trash-o",sClass:"red","min-icon":"fa-trash-o"}}}},e.meTables=e.mt=function(e){return new l(e)},e.MeTables=l}(window,jQuery);