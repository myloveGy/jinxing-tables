!function(t,e){var a,i,s,o=null,n=function(t){return new n.fn._construct(t)};Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},n.fn=n.prototype={constructor:n,_construct:function(t){this.table=null,this.action="construct";var a=this;if(void 0!==t&&(t.ajaxRequest?(this.options.table.ajax={url:null,type:a.options.sMethod,dataType:"json",data:function(t){var i=e(n.fn.options.searchForm).serializeArray(),s=[];for(var o in i)if(""!==i[o].value&&i[o].value){var l=n.getAttributeName(i[o].name,"params");s.push({name:l,value:i[o].value})}return n.fn.push(s,a.options.params,"params"),s}},this.options.table.sAjaxSource=!1,this.options.table.fnServerData=!1,this.options.table.bServerSide=!1,this.options.table.lengthMenu=[100,200,300,500,1e3],this.options.table.pageLength=100,this.options.operations.bOpen=!1,this.options.buttons=this.extend(this.options.buttons,{create:{bShow:!1},updateAll:{bShow:!1}})):this.options.table.fnServerData=this.fnServerData,this.extend({options:t})),this.options.ajaxRequest?this.options.table.ajax.url||(this.options.table.ajax.url=a.getUrl("search")):this.options.table.sAjaxSource||(this.options.table.sAjaxSource=this.getUrl("search")),this.options.table.oLanguage=this.getLanguage("dataTables","*"),this.options.form.id=this.options.sFormId.replace("#",""),this.options.bCheckbox&&this.options.table.aoColumns.unshift({data:null,bSortable:!1,class:"center",title:'<label class="position-relative"><input type="checkbox" class="ace" /><span class="lbl"></span></label>',bViews:!1,width:this.options.checkboxWidth,createdCell:function(t,a,i,s,o){e(t).html('<label class="position-relative"><input type="checkbox" value="'+s+'" class="ace" table-data="'+s+'" /><span class="lbl"></span></label>')}}),this.options.operations.bOpen){for(var i in this.options.operations.buttons)!1===this.options.operations.buttons[i].bShow?delete this.options.operations.buttons[i]:this.options.operations.buttons[i].title||(this.options.operations.buttons[i].title=a.getLanguage("operations_"+i));this.options.table.aoColumns.push({data:null,bSortable:!1,title:a.getLanguage("operations"),width:a.options.operations.width,createdCell:function(t,i,s,o){e(t).html(n.buttonsCreate(o,a.options.operations.buttons))}})}for(var s in this.options.bChildTables&&(this.options.childTables.table.oLanguage=this.options.table.oLanguage,this.options.childTables.table.sAjaxSource||(this.options.childTables.table.sAjaxSource=this.options.childTables.url.search),void 0===this.options.childTables.table.fnServerData&&(this.options.childTables.table.fnServerData=function(t,i,s){a.data.childParams&&(a.push(i,a.data.childParams),a.push(i,a.options.childTables.params),n.ajax({url:t,data:i,type:"post",dataType:"json"}).done(function(t){if(0!==t.errCode)return layer.msg(a.getLanguage("sAppearError")+t.errMsg,{time:2e3,icon:5});s(t.data),n.fn.data.childObject&&a.data.childObject.child(function(){return e(a.options.childTables.sTable).parent().html()}).show()}))})),"middle"!==this.options.searchType&&n.empty(this.options.table.sDom)&&(this.options.table.sDom="t<'row'<'col-xs-6'li><'col-xs-6'p>>"),this.options.buttons)null!==this.options.buttons[s]&&!0===this.options.buttons[s].bShow&&(this.options.buttons[s].text||(this.options.buttons[s].text=this.getLanguage(s)),this.options.buttonHtml+='<button class="'+this.options.buttons[s].className+'" id="'+this.options.sTable.replace("#","")+"-"+s+'">                                <i class="'+this.options.buttons[s].icon+'"></i>                            '+this.options.buttons[s].text+"                            </button> ");return this},init:function(t){this.action="init",this.initRender(),this.table=e(this.options.sTable).DataTable(this.options.table);var a=this;if("middle"===this.options.searchType)e(this.options.sTable+"_filter").html('<form id="'+this.options.searchForm.replace("#","")+'">'+this.options.searchHtml+"</form>"),e(this.options.sTable+"_wrapper div.row div.col-xs-6:first").removeClass("col-xs-6").addClass("col-xs-2").next().removeClass("col-xs-6").addClass("col-xs-10");else if(this.options.search.render){this.options.searchHtml+='<button class="'+this.options.search.button.class+'">                    <i class="'+this.options.search.button.icon+'"></i>                    '+this.getLanguage("search")+"                    </button>";try{e(this.options.searchForm)[this.options.search.type](this.options.searchHtml)}catch(t){e(this.options.searchForm).append(this.options.searchHtml)}}this.options.bEvent&&(e(this.options.searchForm+" input").on(this.options.searchInputEvent,function(){a.table.draw()}),e(this.options.searchForm+" select").on(this.options.searchSelectEvent,function(){a.table.draw()}));try{e(a.options.buttonSelector)[a.options.buttonType](a.options.buttonHtml)}catch(t){e(a.options.buttonSelector).append(a.options.buttonHtml)}for(var i in a.options.buttons)!function(t){a.options.buttons[t]&&!0===a.options.buttons[t].bShow&&e(document).on("click",a.options.sTable+"-"+t,function(e){e.preventDefault(),a[t]()})}(i);if(e(this.options.searchForm).submit(function(t){t.preventDefault(),a.search(!0)}),e(document).on("click",a.options.sTable+"-save",function(t){t.preventDefault(),a.save()}),e(document).on("click",".me-table-update",function(t){t.preventDefault(),a.update(e(this).attr("table-data"))}),e(document).on("click",".me-table-delete",function(t){t.preventDefault(),a.delete(e(this).attr("table-data"))}),e(document).on("click",".me-table-detail",function(t){t.preventDefault(),a.detail(e(this).attr("table-data"))}),e(document).on("click",this.options.sTable+" th input:checkbox",function(){var t=this;e(this).closest("table").find("tr > td:first-child input:checkbox").each(function(){this.checked=t.checked,e(this).closest("tr").toggleClass("selected")})}),this.options.bChildTables&&(this.childTable=e(this.options.childTables.sTable).DataTable(this.options.childTables.table),e(".me-table-child-create").click(function(t){t.preventDefault(),a.create(!0)}),e(".me-table-child-save").click(function(t){t.preventDefault(),a.save(null,!0)}),e(document).on("click",".me-table-child-detail",function(t){t.preventDefault(),a.detail(e(this).attr("table-data"),!0)}),e(document).on("click",".me-table-child-update",function(t){t.preventDefault(),a.update(e(this).attr("table-data"),!0)}),e(document).on("click",".me-table-child-delete",function(t){t.preventDefault(),a.delete(e(this).attr("table-data"),!0)}),e(this.options.sTable+" tbody").on("click",this.options.childTables.sClickSelect,function(){var t=e(this).closest("tr"),i=a.table.row(t);t.siblings(t).each(function(){a.table.row(e(this)).child.isShown()&&(a.table.row(e(this)).child.hide(),e(this).removeClass("shown"))}),i.child.isShown()?(i.child.hide(),t.removeClass("shown")):(a.data.childParams=i.data(),a.data.childObject=i,a.childTable.draw(),t.addClass("shown"))})),this.options.editable&&(e.fn.editable.defaults.mode=this.options.editableMode||"inline",e.fn.editableform.loading="<div class='editableform-loading'><i class='ace-icon fa fa-spinner fa-spin fa-2x light-blue'></i></div>",e.fn.editableform.buttons='<button type="submit" class="btn btn-info editable-submit"><i class="ace-icon fa fa-check"></i></button><button type="button" class="btn editable-cancel"><i class="ace-icon fa fa-times"></i></button>',e.fn.editable.defaults.ajaxOptions={type:"POST",dataType:"json"}),!n.empty(a.options.fileSelector)&&a.options.fileSelector.length>0)for(var s in a.options.fileSelector)aceFileUpload(a.options.fileSelector[s],a.getUrl("upload"));return"function"==typeof t&&t(),this},fnServerData:function(t,a,i){var o=a[2].value.split(","),l=5*(o.length+1)+2,r=e(n.fn.options.searchForm).serializeArray();for(s in r)if(!n.empty(r[s].value)&&"All"!==r[s].value){var c=n.getAttributeName(r[s].name,"params");a.push({name:c,value:r[s].value})}n.fn.push(a,{orderBy:o[parseInt(a[l].value)]},"params"),n.fn.push(a,n.fn.options.params,"params"),n.ajax({url:t,data:a,type:n.fn.options.sMethod,dataType:"json"}).done(function(t){if(0!==t.errCode)return layer.msg(n.fn.getLanguage("sAppearError")+t.errMsg,{time:2e3,icon:5});i(t.data)})},search:function(t){this.action="search",t||(t=!1),this.options.ajaxRequest?this.table.ajax.reload():this.table.draw(t)},refresh:function(){this.action="refresh",this.search(!0)},create:function(t){this.action="create",this.initForm(null,t)},update:function(t,e){this.action="update",this.initForm(e?this.childTable.data()[t]:this.table.data()[t],e)},updateAll:function(){var t=e(this.options.sTable+" tbody input:checkbox:checked:last").attr("table-data");if(!t)return layer.msg(this.getLanguage("noSelect"),{icon:5});this.action="update",this.initForm(this.table.data()[t],!1)},delete:function(t,e){var a=this;this.action="delete",layer.confirm(this.getLanguage("confirm").replace("_LENGTH_",""),{title:a.getLanguage("confirmOperation"),btn:[a.getLanguage("determine"),a.getLanguage("cancel")],shift:4,icon:0},function(){a.save(e?a.childTable.data()[t]:a.table.data()[t],e)},function(){layer.msg(a.getLanguage("cancelOperation"),{time:800})})},deleteAll:function(){this.action="deleteAll";var t=this,a=[];if(e(this.options.sTable+" tbody input:checkbox:checked").each(function(){var i=parseInt(e(this).val()),s=t.table.data()[i]?t.table.data()[i]:null;s&&s[t.options.pk]&&a.push(s[t.options.pk])}),a.length<1)return layer.msg(t.getLanguage("noSelect"),{icon:5});layer.confirm(this.getLanguage("confirm").replace("_LENGTH_",a.length),{title:t.getLanguage("confirmOperation"),btn:[t.getLanguage("determine"),t.getLanguage("cancel")],shift:4,icon:0},function(){t.save({id:a.join(",")}),e(t.options.sTable+" input:checkbox:checked").prop("checked",!1)},function(){layer.msg(t.getLanguage("cancelOperation"),{time:800})})},detail:function(t,a){if(this.options.oLoading)return!1;var i=this,s=this.table.data()[t],o=this.options.table.aoColumns,l=i.options.title,r=".data-detail-",c="#data-detail-"+i.options.sTable.replace("#","");a&&(s=this.childTable.data()[t],o=this.options.childTables.table.aoColumns,l="",r+="child-",c+="-child"),void 0!==s&&(n.detailTable(o,s,r,t),this.options.oLoading=layer.open({type:this.options.oViewConfig.type,shade:this.options.oViewConfig.shade,shadeClose:this.options.oViewConfig.shadeClose,title:l+i.getLanguage("sInfo"),content:e(c),area:this.options.oViewConfig.area,cancel:function(t){layer.close(t)},end:function(){e(".views-info").html(""),i.options.oLoading=null},maxmin:this.options.oViewConfig.maxmin}),this.options.bViewFull&&layer.full(this.options.oLoading))},save:function(t,a){var i=this;if(n.inArray(this.action,["create","update","delete","deleteAll"])){var s=this.options.sFormId,o=this.getUrl(this.action),l=this.options.sModal;if(a&&(s=this.options.childTables.sFormId,o=this.options.childTables.url[this.action],l=this.options.childTables.sModal),n.inArray(this.action,["create","update"])){if(!e(s).validate(i.options.formValidate).form())return!1;t=e(s).serializeArray()}t&&("function"!=typeof i.beforeSave||i.beforeSave(t,a))&&n.ajax({url:o,type:"POST",data:t,dataType:"json"}).done(function(t){layer.msg(t.errMsg,{icon:0===t.errCode?6:5}),0===t.errCode&&("function"!=typeof i.afterSave||i.afterSave(t.data,a))&&(a?i.childTable.draw(!1):i.table.draw(!1),"delete"!==i.action&&e(l).modal("hide"),i.action="save")})}else layer.msg(i.getLanguage("operationError"));return!1},export:function(){this.action="export";var t=this,a=null,i=e("meta[name=csrf-param]").attr("content")||"_csrf",s='<form action="'+this.getUrl("export")+'" target="_blank" method="POST" class="me-export" style="display:none">';s+='<input type="hidden" name="title" value="'+t.options.title+'"/>',s+='<input type="hidden" name="'+i+'" value="'+e("meta[name=csrf-token]").attr("content")+'"/>',this.options.table.aoColumns.forEach(function(t,e){!t.data||!0===t.isExport&&!0===t.bExport||(s+='<input type="hidden" name="fields['+t.data+']" value="'+t.title+'"/>')});var o=e(t.options.searchForm).serializeArray();for(a in o)if(!n.empty(o[a].value)&&"All"!==o[a].value){var l=n.getAttributeName(o[a].name,"params");s+='<input type="hidden" name="'+l+'" value="'+o[a].value+'"/>'}for(a in this.options.params)s+='<input type="hidden" name="params['+a+']" value="'+this.options.params[a]+'"/>';var r=e(s);e("body").append(r);var c=new e.Deferred,d="temporary-iframe-"+(new Date).getTime()+"-"+parseInt(1e3*Math.random()),h=e('<iframe id="'+d+'" name="'+d+'" \t\t\t\t\t\t\t\tframeborder="0" width="0" height="0" src="about:blank"\t\t\t\t\t\t\t\tstyle="position:absolute; z-index:-1; visibility: hidden;"></iframe>').insertAfter(r);r.append('<input type="hidden" name="temporary-iframe-id" value="'+d+'" />'),h.data("deferrer",c),r.attr({method:"POST",enctype:"multipart/form-data",target:d}),r.get(0).submit();var p=setTimeout(function(){p=null,c.reject(e(document.getElementById(d).contentDocument).text()),e(".me-export").remove()},500);c.fail(function(a){if(a)try{a=e.parseJSON(a),layer.msg(a.errMsg,{icon:0===a.errCode?6:5})}catch(e){layer.msg(t.getLanguage("sServerError"),{icon:5})}else layer.msg(t.getLanguage("sExport"),{icon:6})}).always(function(){clearTimeout(p)}),c.promise()},getUrl:function(t){return this.options.urlPrefix+this.options.url[t]+this.options.urlSuffix},initRender:function(){var t=this,a="<form "+n.handleParams(this.options.form)+"><fieldset>",i='<table class="table table-bordered table-striped table-detail">',s=[],o=[];this.options.table.aoColumns.forEach(function(e,l){!1!==e.bViews&&(i+=n.detailTableCreate(e.title,e.data,l,t.options.detailTable)),void 0!==e.edit&&(a+=n.formCreate(e,t.options.editFormParams)),void 0!==e.search&&(t.options.searchHtml+=n.searchInputCreate(e,l,t.options.searchType)),e.defaultOrder&&s.push([l,e.defaultOrder]),(e.isHide||e.bHide)&&o.push(l),t.options.editable&&void 0!==e.editable&&(e.editable.name=e.editable.name?e.editable.name:e.data,t.options.editable[e.editable.name]={source:e.value,send:"always",url:t.getUrl("editable"),title:e.title,success:function(t){if(0!==t.errCode)return t.errMsg},error:function(e){layer.msg(t.getLanguage("sServerError"),{icon:5})}},t.options.editable[e.editable.name]=t.extend(t.options.editable[e.editable.name],e.editable),e.class="my-edit edit-"+e.editable.name)}),t.options.editable&&(t.options.table.fnDrawCallback=function(){for(var a in t.options.editable)e(t.options.sTable+" tbody tr td.edit-"+a).each(function(){var i=t.table.row(e(this).closest("tr")).data(),s={};i&&(s.value=i[a],s.pk=i[t.options.pk]),e(this).editable(t.extend(t.options.editable[a],s))})}),t.options.editFormParams.bMultiCols&&n.empty(t.options.editFormParams.modalClass)&&(t.options.editFormParams.modalClass="bs-example-modal-lg",t.options.editFormParams.modalDialogClass="modal-lg"),t.options.editFormParams.bMultiCols&&t.options.editFormParams.index%t.options.editFormParams.iCols!=t.options.editFormParams.iCols-1&&(a+="</div>"),this.data.sUpdateModel=n.modalCreate({params:{id:t.options.sModal.replace("#","")},html:a,"button-id":t.options.sTable.replace("#","")+"-save",modalClass:t.options.editFormParams.modalClass,modalDialogClass:t.options.editFormParams.modalDialogClass},{params:{id:"data-detail-"+t.options.sTable.replace("#","")},html:i}),this.options.bChildTables&&(a='<form id="'+this.options.childTables.sFormId.replace("#","")+'" class="form-horizontal" action="'+this.getUrl("update")+'" name="myDetailForm" method="post" enctype="multipart/form-data"><fieldset>',i='<table class="table table-bordered table-striped table-detail">',this.options.childTables.table.aoColumns.forEach(function(e,s){i+=n.detailTableCreate(e.title,"child-"+e.data,s,t.options.childTables.detailTable),void 0!==e.edit&&(a+=n.formCreate(e,t.options.childTables.editFormParams))}),this.data.sUpdateModel+=n.modalCreate({params:{id:t.options.childTables.sModal.replace("#","")},html:a,bClass:"me-table-child-save"},{params:{id:"data-detail-child"},html:i})),s.length>0&&(this.options.table.order=s),o.length>0&&(this.options.table.columnDefs?this.options.table.columnDefs.push({targets:o,visible:!1}):this.options.table.columnDefs=[{targets:o,visible:!1}]),e("body").append(this.data.sUpdateModel)},initForm:function(t,a){if(layer.close(this.options.oLoading),"function"==typeof this.beforeShow&&!this.beforeShow(t,a))return!1;var i=this.options.sFormId,s=this.options.sModal,o=this.options.title;if(a&&(i=this.options.childTables.sFormId,s=this.options.childTables.sModal,o+=this.getLanguage("sInfo")),e(s).find("h4").html(o+this.getLanguage("create"===this.action?"sCreate":"sUpdate")),n.initForm(i,t),"function"==typeof this.afterShow&&!this.afterShow(t,a))return!1;e(s).modal({backdrop:"static"})},getLanguage:function(){return arguments.length>1&&this.language[this.options.language][arguments[0]]?"*"===arguments[1]?this.language[this.options.language][arguments[0]]:this.language[this.options.language][arguments[0]][arguments[1]]:this.language[this.options.language].meTables[arguments[0]]},push:function(t,e,a){if(void 0!==e&&!n.empty(e))if(void 0===a)for(s in e)t.push({name:s,value:e[s]});else for(s in e)t.push({name:a+"["+s+"]",value:e[s]})}},n.fn._construct.prototype=n.fn,n.extend=n.fn.extend=function(){var t,e,a=arguments[0]||{},i=1,s=arguments.length;for(s===i&&(a=this,--i);i<s;i++)if(null!==(e=arguments[i]))for(t in e)e[t]!==a[t]&&("object"==typeof a[t]?a[t]=this.extend(a[t],e[t]):void 0!==e[t]&&(a[t]=e[t]));return a},n.extend({getAttributeName:function(t,e){if(/\[/.test(t))var a=t.indexOf("["),i=t.substring(0,a),s=t.substring(a);else i=t,s="";return e+"["+i+"]"+s},ajax:function(t){return o=layer.load(),e.ajax(t).always(function(){layer.close(o)}).fail(function(){layer.msg(n.fn.getLanguage("sServerError"),{icon:5})})},inArray:function(t,e){if("object"==typeof e)for(var a in e)if(e[a]===t)return!0;return!1},empty:function(t){return void 0===t||""===t||null===t},isObject:function(t){return"object"==typeof t},handleParams:function(t,e){if(a="",void 0!==t&&"object"==typeof t){for(var i in e=e||"",t)a+=" "+i+'="'+e+t[i]+'"';a+=" "}return a},labelCreate:function(t,e){return"<label"+this.handleParams(e)+"> "+t+" </label>"},inputCreate:function(t){return t.type||(t.type="text"),"<input"+this.handleParams(t)+"/>"},textCreate:function(t){return t.type="text",this.inputCreate(t)},passwordCreate:function(t){return t.type="password",this.inputCreate(t)},fileCreate:function(t){var e=t.options;return delete t.options,i='<input type="hidden" '+this.handleParams(t)+"/>",e.type="file",i+this.inputCreate(e)},radioCreate:function(t,e){if(i="",e&&this.isObject(e)){t.class="ace valid";var a=t.default;for(s in t=this.handleParams(t),e)i+='<label class="line-height-1 blue"> <input type="radio" '+t+(a==s?' checked="checked" ':"")+' value="'+s+'"  /> <span class="lbl"> '+e[s]+" </span> </label>　 "}return i},checkboxCreate:function(t,e){if(i="",e&&this.isObject(e)){var a=t.all,o=t.divClass?t.divClass:"col-xs-6";for(s in delete t.all,delete t.divClass,t.class="ace m-checkbox",t=this.handleParams(t),a&&(i+='<div class="checkbox col-xs-12"><label><input type="checkbox" class="ace checkbox-all" onclick="var isChecked = $(this).prop(\'checked\');$(this).parent().parent().parent().find(\'input[type=checkbox]\').prop(\'checked\', isChecked);" /><span class="lbl"> '+n.fn.getLanguage("sSelectAll")+" </span></label></div>"),e)i+='<div class="checkbox '+o+'"><label><input type="checkbox" '+t+' value="'+s+'" /><span class="lbl"> '+e[s]+" </span></label></div>"}return i},selectCreate:function(t,e){if(i="",e&&this.isObject(e)){var a=t.default;for(s in delete t.default,t.multiple&&(t.name+="[]"),i+="<select "+this.handleParams(t)+">",e)i+='<option value="'+s+'" '+(s==a?' selected="selected" ':"")+" >"+e[s]+"</option>";i+="</select>"}return i},textareaCreate:function(t){return t.class||(t.class="form-control"),t.rows||(t.rows=5),i=(t.value?t.value:"")+"</textarea>",delete t.value,"<textarea"+this.handleParams(t)+">"+i},searchInputCreate:function(t,e,a){t.search.name||(t.search.name=t.data),t.search.title||(t.search.title=t.title),t.search.type||(t.search.type="text");var s="select"===t.search.type?{All:n.fn.getLanguage("all")}:null;if("middle"===a)try{i=this[t.search.type+"SearchMiddleCreate"](t.search,t.value,s)}catch(e){i=this.textSearchMiddleCreate(t.search)}else try{i=this[t.search.type+"SearchCreate"](t.search,t.value,s)}catch(e){i=this.textSearchCreate(t.search)}return i},buttonsCreate:function(t,e){var a='<div class="hidden-sm hidden-xs btn-group">',i='<div class="hidden-md hidden-lg"><div class="inline position-relative"><button data-position="auto" data-toggle="dropdown" class="btn btn-minier btn-primary dropdown-toggle"><i class="ace-icon fa fa-cog icon-only bigger-110"></i></button><ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">';if(void 0!==e&&"object"==typeof e)for(var s in e)a+=' <button class="btn '+e[s].className+" "+e[s].cClass+' btn-xs" table-data="'+t+'"><i class="ace-icon fa '+e[s].icon+' bigger-120"></i> '+(e[s]["button-title"]?e[s]["button-title"]:"")+"</button> ",i+='<li><a title="'+e[s].title+'" data-rel="tooltip" class="tooltip-info '+e[s].cClass+'" href="javascript:;" data-original-title="'+e[s].title+'" table-data="'+t+'"><span class="'+e[s].sClass+'"><i class="ace-icon fa '+e[s].icon+' bigger-120"></i></span></a></li>';return a+"</div>"+i+"</ul></div></div>"},formCreate:function(t,e){var a="";if(e.index||(e.index=0),t.edit.type||(t.edit.type="text"),t.edit.name||(t.edit.name=t.data),"hidden"===t.edit.type)a+=this.inputCreate(t.edit);else{if(t.edit.class="form-control "+(t.edit.class?t.edit.class:""),e.iMultiCols>1&&!e.aCols){e.aCols=[];var i=Math.ceil(12/e.iMultiCols);e.aCols[0]=Math.floor(.3*i),e.aCols[1]=i-e.aCols[0]}(!e.bMultiCols||e.iColsLength>1&&e.index%e.iColsLength==0)&&(a+='<div class="form-group">');var s=t.edit.name.replace("[]","");a+=this.labelCreate(t.title,{class:"col-sm-"+e.aCols[0]+" control-label div-left-"+s}),a+='<div class="col-sm-'+e.aCols[1]+" div-right-"+s+'">';try{a+=this[t.edit.type+"Create"](t.edit,t.value)}catch(e){t.edit.type="text",a+=this.inputCreate(t.edit)}a+="</div>",(!e.bMultiCols||e.iColsLength>1&&e.index%e.iColsLength==e.iColsLength-1)&&(a+="</div>"),e.index++}return a},selectInput:function(t,e,a){if(i="",a)for(s in a)i+='<option value="'+s+'" selected="selected">'+a[s]+"</option>";if(e)for(s in e)i+='<option value="'+s+'">'+e[s]+"</option>";return t.multiple&&(t.name+="[]"),"<select "+this.handleParams(t)+">"+i+"</select>"},textSearchMiddleCreate:function(t){return t.id="search-"+t.name,'<label for="search-'+t.name+'"> '+t.title+": "+this.inputCreate(t)+"</label>"},selectSearchMiddleCreate:function(t,e,a){return t.id="search-"+t.name,'<label for="search-'+t.name+'"> '+t.title+": "+this.selectInput(t,e,a)+"</label>"},searchParams:function(t){var e={id:"search-"+t.name,name:t.name,class:"form-control"},a={for:"search-"+t.name},i=t.options,s=t.labelOptions;return delete t.options,delete t.labelOptions,e=this.extend(e,t),i&&(e=this.extend(e,i)),s&&(a=this.extend(a,s)),{input:e,label:a}},textSearchCreate:function(t){t.placeholder||(t.placeholder=n.fn.getLanguage("pleaseInput")+t.title),t.labelOptions||(t.labelOptions={class:"sr-only"});var e=this.searchParams(t);return'<div class="form-group">                <label'+this.handleParams(e.label)+">"+t.title+'</label>                <input type="text"'+this.handleParams(e.input)+">                </div> "},selectSearchCreate:function(t,e,a){var i=this.searchParams(t);return'<div class="form-group">                <label'+this.handleParams(i.label)+">"+t.title+"</label>                "+this.selectInput(i.input,e,a)+"                </div> "},initForm:function(t,a){var i=e(t);if(objForm=i.get(0),void 0!==objForm&&(i.find("input[type=hidden]").val(""),i.find("input[type=checkbox]").each(function(){e(this).attr("checked",!1),e(this).get(0)&&(e(this).get(0).checked=!1)}),objForm.reset(),void 0!==a))for(var s in a){if("object"==typeof a[s])for(var o in a[s]){var n=s+"["+o+"]";void 0!==objForm[n]?objForm[n].value=a[s][o]:parseInt(a[s][o])>0&&e("input[type=checkbox][name="+s+"\\[\\]][value="+a[s][o]+"]").attr("checked",!0).each(function(){this.checked=!0})}if(void 0!==objForm[s]&&"password"!==objForm[s].type){var l=e(objForm[s]),r=a[s];l.hasClass("time-format")&&(r=mt.timeFormat(parseInt(r),l.attr("time-format")?l.attr("time-format"):"yyyy-MM-dd hh:mm:ss")),objForm[s].value=r}}},divCreate:function(t){return"<div"+this.handleParams(t)+"></div>"},dateCreate:function(t){return'<div class="input-group bootstrap-datepicker">                 <input class="form-control date-picker '+(t.class?t.class:"")+'"  type="text" '+this.handleParams(t)+'/>                 <span class="input-group-addon"><i class="fa fa-calendar bigger-110"></i></span>                 </div>'},timeCreate:function(t){return'<div class="input-group bootstrap-timepicker">                 <input type="text" class="form-control time-picker '+(t.class?t.class:"")+'" '+this.handleParams(t)+'/>                 <span class="input-group-addon"><i class="fa fa-clock-o bigger-110"></i></span>                 </div>'},dateTimeCreate:function(t){return'<div class="input-group bootstrap-datetimepicker">                 <input type="text" class="form-control datetime-picker '+(t.class?t.class:"")+'" '+this.handleParams(t)+'/>                 <span class="input-group-addon"><i class="fa fa-clock-o bigger-110"></i></span>                 </div>'},timeRangeCreate:function(t){return'<div class="input-daterange input-group">                 <input type="text" class="input-sm form-control" name="start" />                 <span class="input-group-addon"><i class="fa fa-exchange"></i></span>                 <input type="text" class="input-sm form-control" name="end" />             </div>'},dateRangeCreate:function(t){return'<div class="input-group">                 <span class="input-group-addon"><i class="fa fa-calendar bigger-110"></i></span>                 <input class="form-control daterange-picker '+(t.class?t.class:"")+'" type="text" '+this.handleParams(t)+" />             </div>"},detailTable:function(t,a,i,s){t.forEach(function(t){var o=t.data,n=a[o],l=e(i+o);void 0!==t.edit&&"password"===t.edit.type&&(n="******"),void 0!==t.createdCell&&"function"==typeof t.createdCell?t.createdCell(l,n,a,s,void 0):l.html(n)})},detailTableCreate:function(t,e,a,s){return i="",s&&s.bMultiCols?(s.iColsLength>1&&a%s.iColsLength==0&&(i+="<tr>"),i+='<td class="text-right" width="25%">'+t+'</td><td class="views-info data-detail-'+e+'"></td>',s.iColsLength>1&&a%s.iColsLength==s.iColsLength-1&&(i+="</tr>")):i+='<tr><td class="text-right" width="25%">'+t+'</td><td class="views-info data-detail-'+e+'"></td></tr>',i},modalCreate:function(t,e){return'<div class="isHide" '+this.handleParams(e.params)+"> "+e.html+' </table></div>             <div class="modal fade '+(t.modalClass?t.modalClass:"")+'" '+this.handleParams(t.params)+' tabindex="-1" role="dialog" >                 <div class="modal-dialog '+(t.modalDialogClass?t.modalDialogClass:"")+'" role="document">                     <div class="modal-content">                         <div class="modal-header">                             <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                             <h4 class="modal-title"></h4>                         </div>                         <div class="modal-body">'+t.html+'</fieldset></form></div>                         <div class="modal-footer">                             <button type="button" class="btn btn-default" data-dismiss="modal">'+n.fn.getLanguage("sBtnCancel")+'</button>                             <button type="button" class="btn btn-primary '+(t.bClass?t.bClass:"")+'" '+(t["button-id"]?'id="'+t["button-id"]+'"':"")+">"+n.fn.getLanguage("sBtnSubmit")+"</button>                         </div>                     </div>                 </div>             </div>"},timeFormat:function(t,e){return e||(e="yyyy-MM-dd"),new Date(1e3*t).Format(e)},dateTimeString:function(t,a){e(t).html(mt.timeFormat(a,"yyyy-MM-dd hh:mm:ss"))},statusString:function(t,a){e(t).html('<span class="label label-'+(1===parseInt(a)?'success">启用':'warning">禁用')+"</span>")},adminString:function(t,a){e(t).html(aAdmins[a])},valuesString:function(t,e,a,i){return i||(i="label label-sm "),'<span class="'+i+" "+(e[a]?e[a]:"")+'"> '+(t[a]?t[a]:a)+" </span>"}}),n.fn.extend({options:{title:"",language:"zh-cn",pk:"id",sModal:"#table-modal",sTable:"#show-table",sFormId:"#edit-form",sMethod:"POST",bCheckbox:!0,checkboxWidth:"auto",params:null,ajaxRequest:!1,searchHtml:"",searchType:"middle",searchForm:"#search-form",bEvent:!0,searchInputEvent:"blur",searchSelectEvent:"change",search:{render:!0,type:"append",button:{class:"btn btn-info btn-sm",icon:"ace-icon fa fa-search"}},fileSelector:[],form:{method:"post",class:"form-horizontal",name:"edit-form"},formValidate:{errorElement:"div",errorClass:"help-block",focusInvalid:!1,highlight:function(t){e(t).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(t){e(t).closest(".form-group").removeClass("has-error"),e(t).remove()}},editFormParams:{bMultiCols:!1,iColsLength:1,aCols:[3,9],sModalClass:"",sModalDialogClass:""},bViewFull:!1,oViewConfig:{type:1,shade:.3,shadeClose:!0,maxmin:!0,area:["50%","auto"]},detailTable:{bMultiCols:!1,iColsLength:1},urlPrefix:"",urlSuffix:"",url:{search:"search",create:"create",update:"update",delete:"delete",export:"export",upload:"upload",editable:"editable",deleteAll:"delete-all"},table:{bLengthChange:!0,bAutoWidth:!1,bPaginate:!0,iDisplayStart:0,iDisplayLength:10,bServerSide:!0,bRetrieve:!0,bDestroy:!0,sPaginationType:"full_numbers"},bChildTables:!1,childTables:{sTable:"#child-table",sModal:"#child-modal",sFormId:"#child-form",urlPrefix:"",urlSuffix:"",url:{search:"view",create:"create",update:"update",delete:"delete"},sClickSelect:"td.child-control",table:{bPaginate:!1,bLengthChange:!1,bServerSide:!0,bAutoWidth:!1,searching:!1,ordering:!1},detailTable:{bMultiCols:!1,iColsLength:1},editFormParams:{bMultiCols:!1,iColsLength:1,aCols:[3,9],sModalClass:"",sModalDialogClass:""}},editable:null,editableMode:"inline",buttonHtml:"",buttonSelector:"#me-table-buttons",buttonType:"append",buttons:{create:{bShow:!0,icon:"ace-icon fa fa-plus-circle blue",className:"btn btn-white btn-primary btn-bold"},updateAll:{bShow:!0,icon:"ace-icon fa fa-pencil-square-o orange",className:"btn btn-white btn-info btn-bold"},deleteAll:{bShow:!0,icon:"ace-icon fa fa-trash-o red",className:"btn btn-white btn-danger btn-bold"},refresh:{bShow:!0,icon:"ace-icon fa  fa-refresh",className:"btn btn-white btn-success btn-bold"},export:{bShow:!0,icon:"ace-icon glyphicon glyphicon-export",className:"btn btn-white btn-warning btn-bold"}},operations:{bOpen:!0,width:"120px",defaultContent:"",buttons:{see:{className:"btn-success",cClass:"me-table-detail",icon:"fa-search-plus",sClass:"blue"},update:{className:"btn-info",cClass:"me-table-update",icon:"fa-pencil-square-o",sClass:"green"},delete:{className:"btn-danger",cClass:"me-table-delete",icon:"fa-trash-o",sClass:"red"}}}},data:{sInfo:"",sUpdateModel:"",sInfoTable:"",childParams:null,childObject:null},language:{"zh-cn":{meTables:{operations:"操作",operations_see:"查看",operations_update:"编辑",operations_delete:"删除",sBtnCancel:"取消",sBtnSubmit:"确定",sSelectAll:"选择全部",sInfo:"详情",sCreate:"新增",sUpdate:"编辑",sExport:"数据正在导出, 请稍候...",sAppearError:"出现错误",sServerError:"服务器繁忙,请稍候再试...",determine:"确定",cancel:"取消",confirm:"您确定需要删除这_LENGTH_条数据吗?",confirmOperation:"确认操作",cancelOperation:"您取消了删除操作!",noSelect:"没有选择需要操作的数据",operationError:"操作有误",search:"搜索",create:"添加",updateAll:"修改",deleteAll:"删除",refresh:"刷新",export:"导出",pleaseInput:"请输入",all:"全部"},dataTables:{sLengthMenu:"每页 _MENU_ 条记录",sZeroRecords:"没有找到记录",sInfo:"显示 _START_ 到 _END_ 共有 _TOTAL_ 条数据",sInfoEmpty:"无记录",sInfoFiltered:"(从 _MAX_ 条记录过滤)",sSearch:"搜索：",oPaginate:{sFirst:"首页",sPrevious:"上一页",sNext:"下一页",sLast:"尾页"}}}}}),n.fn.extend({options:{childTables:{operations:{data:null,title:n.fn.getLanguage("sOperation"),bSortable:!1,width:"120px",createdCell:function(t,a,i,s){e(t).html(n.buttonsCreate(s,[{data:s,title:n.fn.getLanguage("sBtnView"),className:"btn-success",cClass:"me-table-child-detail",icon:"fa-search-plus",sClass:"blue"},{data:s,title:n.fn.getLanguage("sBtnEdit"),className:"btn-info",cClass:"me-table-child-update",icon:"fa-pencil-square-o",sClass:"green"},{data:s,title:n.fn.getLanguage("sBtnDelete"),className:"btn-danger",cClass:"me-table-child-delete",icon:"fa-trash-o",sClass:"red"}]))}}}}}),t.meTables=t.mt=n}(window,jQuery);